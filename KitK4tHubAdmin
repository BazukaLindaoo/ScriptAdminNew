-- Serviços
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Nicks autorizados
local Donos = {"Breno010L","itz_kadu22","Gabriel263633j","shawnlovebazuka"}
local Moderadores = {"saitama9rsm","RUANRODRIGO121121"}

-- Retorna cargo
local function GetCargo(nome)
    if table.find(Donos,nome) then return "Dono" end
    if table.find(Moderadores,nome) then return "Moderador" end
    return nil
end

-- ================= TAGS =================
local function CreateTag(player)
    local cargo = GetCargo(player.Name)
    if not cargo then return end

    local function applyTag(char)
        local head = char:FindFirstChild("Head") or char:FindFirstChild("HumanoidRootPart")
        if not head then return end
        if head:FindFirstChild("KitK4tTag") then return end

        local billboard = Instance.new("BillboardGui")
        billboard.Name = "KitK4tTag"
        billboard.Adornee = head
        billboard.Size = UDim2.new(0,200,0,50)
        billboard.StudsOffset = Vector3.new(0,3,0)
        billboard.AlwaysOnTop = true
        billboard.Parent = head

        local textLabel = Instance.new("TextLabel")
        textLabel.Size = UDim2.new(1,0,1,0)
        textLabel.BackgroundTransparency = 1
        textLabel.TextScaled = true
        textLabel.TextWrapped = true
        textLabel.Text = cargo.." do KitK4t Hub"
        textLabel.TextColor3 = cargo=="Dono" and Color3.fromRGB(255,0,0) or Color3.fromRGB(0,170,255)
        textLabel.TextStrokeTransparency = 0
        textLabel.TextStrokeColor3 = Color3.new(0,0,0)
        textLabel.Font = Enum.Font.GothamBold
        textLabel.Parent = billboard
    end

    if player.Character then applyTag(player.Character) end
    player.CharacterAdded:Connect(applyTag)
end

for _,plr in ipairs(Players:GetPlayers()) do CreateTag(plr) end
Players.PlayerAdded:Connect(CreateTag)

-- ================= FUNÇÕES =================
local function GetCharacter(playerName)
    local plr = Players:FindFirstChild(playerName)
    return plr and plr.Character or nil
end

local loopKill = false

local function Kick(playerName)
    if playerName==LocalPlayer.Name then LocalPlayer:Kick("Você foi removido pelo KitK4t Hub.") end
end

local function LoopKill(playerName)
    if playerName==LocalPlayer.Name then
        loopKill = not loopKill
        if loopKill then
            task.spawn(function()
                while loopKill do
                    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                        LocalPlayer.Character.Humanoid.Health = 0
                    end
                    task.wait(0.3)
                end
            end)
        end
    end
end

local function KillPlus(playerName)
    if playerName==LocalPlayer.Name then
        local char = GetCharacter(LocalPlayer.Name)
        if char then
            char:BreakJoints()
            local root = char:FindFirstChild("HumanoidRootPart")
            if root then
                for i=1,10 do
                    local part = Instance.new("Part")
                    part.Size = Vector3.new(10,10,10)
                    part.Anchored = false
                    part.CanCollide = false
                    part.Material = Enum.Material.Neon
                    part.BrickColor = BrickColor.Random()
                    part.CFrame = root.CFrame
                    part.Parent = workspace

                    local bv = Instance.new("BodyVelocity")
                    bv.Velocity = Vector3.new(math.random(-50,50),math.random(20,80),math.random(-50,50))
                    bv.MaxForce = Vector3.new(1e5,1e5,1e5)
                    bv.Parent = part
                    game.Debris:AddItem(part,3)
                end
            end
        end
    end
end

local function Fling(playerName)
    if playerName==LocalPlayer.Name and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local tween = TweenService:Create(LocalPlayer.Character.HumanoidRootPart, TweenInfo.new(2,Enum.EasingStyle.Linear), {CFrame=CFrame.new(50000,5000000,3972823)})
        tween:Play()
    end
end

local function Freeze(playerName)
    if playerName==LocalPlayer.Name and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.Anchored = true
    end
end

local function UnFreeze(playerName)
    if playerName==LocalPlayer.Name and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.Anchored = false
    end
end

local function Bring(playerName)
    local target = Players:FindFirstChild(playerName)
    local localChar = LocalPlayer.Character
    if not target or not target.Character or not localChar then return end

    local targetRoot = target.Character:FindFirstChild("HumanoidRootPart")
    local localRoot = localChar:FindFirstChild("HumanoidRootPart")
    if not targetRoot or not localRoot then return end

    targetRoot.CFrame = localRoot.CFrame + Vector3.new(0,3,0)
end

local function Verifique()
    print("Verifique executado!") -- Aqui você pode adicionar a função real
end

local function TimeoutRoblox()
    print("TimeoutRoblox executado!") -- Aqui você pode adicionar a função real
end

-- ================= KAVO UI =================
local Kavo = loadstring(game:HttpGet("https://raw.githubusercontent.com/RegularVynixu/Kavo-UI-Library/main/source.lua"))()
local cargoLocal = GetCargo(LocalPlayer.Name) or "Player"
local Window = Kavo.CreateLib("KitK4t Hub - "..cargoLocal,"DarkTheme")
local Tab = Window:NewTab("Principal")
local Section = Tab:NewSection("Comandos")

local SelectedPlayer
local function GetPlayersList()
    local list = {}
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr~=LocalPlayer then table.insert(list,plr.Name) end
    end
    return list
end

SelectedPlayer = GetPlayersList()[1]
local dropdown = Section:NewDropdown("Selecionar Jogador", GetPlayersList(), function(val) SelectedPlayer = val end)
Players.PlayerAdded:Connect(function() dropdown:Refresh(GetPlayersList()) end)
Players.PlayerRemoving:Connect(function() dropdown:Refresh(GetPlayersList()) end)

local function ExecuteCommand(cmd)
    if cmd=="kick" then Kick(SelectedPlayer)
    elseif cmd=="loopkill" then LoopKill(SelectedPlayer)
    elseif cmd=="killplus" then KillPlus(SelectedPlayer)
    elseif cmd=="fling" then Fling(SelectedPlayer)
    elseif cmd=="freeze" then Freeze(SelectedPlayer)
    elseif cmd=="unfreeze" then UnFreeze(SelectedPlayer)
    elseif cmd=="bring" then Bring(SelectedPlayer)
    elseif cmd=="verifique" then Verifique()
    elseif cmd=="timeoutroblox" then TimeoutRoblox()
    end
end

for _,cmd in ipairs({"kick","loopkill","killplus","fling","freeze","unfreeze","bring","verifique","timeoutroblox"}) do
    Section:NewButton(cmd,"Executar "..cmd,function() ExecuteCommand(cmd) end)
end
