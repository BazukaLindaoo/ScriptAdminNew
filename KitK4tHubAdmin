local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")
local LocalPlayer = Players.LocalPlayer

-- üß© Lista de moderadores (adicione mais nomes aqui)
local Moderadores = {
    ["saitama9rsm"] = true,
    ["RUANRODRIGO121121"] = true,
    ["Breno010L"] = true,
    ["itz_kadu22"] = true,
    ["Gabriel263633j"] = true,
}

-- üè∑Ô∏è Fun√ß√£o que cria tag "Moderador"
local function CriarTag(player)
    if not player.Character then return end

    local head = player.Character:FindFirstChild("Head")
    if not head then return end
    if head:FindFirstChild("KitK4tTag") then return end -- evita duplicar

    local billboard = Instance.new("BillboardGui")
    billboard.Name = "KitK4tTag"
    billboard.Adornee = head
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 2.5, 0)
    billboard.AlwaysOnTop = true

    local label = Instance.new("TextLabel")
    label.Parent = billboard
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = "Moderador"
    label.TextColor3 = Color3.fromRGB(0, 255, 255)
    label.TextStrokeTransparency = 0
    label.Font = Enum.Font.GothamBold
    label.TextSize = 18

    billboard.Parent = head
end

-- üîÅ Detecta quando um moderador entra ou respawna
local function VerificarTag(player)
    if Moderadores[player.Name] then
        player.CharacterAdded:Connect(function()
            task.wait(1)
            CriarTag(player)
        end)
        if player.Character then
            task.wait(1)
            CriarTag(player)
        end
    end
end

-- üõ†Ô∏è Fun√ß√£o Bring (traz de uma vez, s√≥ se ambos tiverem o script)
local function Bring(targetName, senderName)
    if LocalPlayer.Name == targetName then
        local sender = Players:FindFirstChild(senderName)
        if sender and sender.Character and LocalPlayer.Character then
            local senderRoot = sender.Character:FindFirstChild("HumanoidRootPart")
            local myRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if senderRoot and myRoot then
                myRoot.CFrame = senderRoot.CFrame + Vector3.new(0, 3, 0)
            end
        end
    end
end

-- üí¨ Fun√ß√£o de leitura de comandos
local function HandleChatCommand(text, senderName)
    if not text or type(text) ~= "string" then return end
    if string.sub(text, 1, 3) == "$$$" then
        local args = string.split(text, " ")
        local command = string.lower(string.sub(args[1], 4))
        local target = args[2]

        if command == "bring" and target then
            Bring(target, senderName)
        end
    end
end

-- üß† Conecta aos chats
pcall(function()
    TextChatService.MessageReceived:Connect(function(message)
        if message and message.Text then
            HandleChatCommand(message.Text, message.TextSource.Name)
        end
    end)
end)

for _, plr in ipairs(Players:GetPlayers()) do
    plr.Chatted:Connect(function(msg)
        HandleChatCommand(msg, plr.Name)
    end)
    VerificarTag(plr)
end

Players.PlayerAdded:Connect(function(plr)
    plr.Chatted:Connect(function(msg)
        HandleChatCommand(msg, plr.Name)
    end)
    VerificarTag(plr)
end)

-- Adiciona a tag ao pr√≥prio player se for moderador
VerificarTag(LocalPlayer)
